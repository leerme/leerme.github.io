<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>最近学习 JavaScript、node.js 的总结 | leerme の Blog</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="大前端全栈的热潮下，最近趁工作不太忙，学习了JavaScript，node.js，做一个小小的Demo来记录一下学习的过程。大佬勿喷。小Demo主要功能是记录用户的个人信息，可以对用户的个人信息进行增删改查。前端页面使用HTML +CSS实现，JavaScript控制逻辑，后台使用node.js实现。下面我分三部分总结一下。 一、前端页面1.1 页面网上传着一句话：不会点HTML+CSS都不敢说自">
<meta property="og:type" content="article">
<meta property="og:title" content="最近学习 JavaScript、node.js 的总结">
<meta property="og:url" content="http://yoursite.com/2017/09/12/最近学习总结/index.html">
<meta property="og:site_name" content="leerme の Blog">
<meta property="og:description" content="大前端全栈的热潮下，最近趁工作不太忙，学习了JavaScript，node.js，做一个小小的Demo来记录一下学习的过程。大佬勿喷。小Demo主要功能是记录用户的个人信息，可以对用户的个人信息进行增删改查。前端页面使用HTML +CSS实现，JavaScript控制逻辑，后台使用node.js实现。下面我分三部分总结一下。 一、前端页面1.1 页面网上传着一句话：不会点HTML+CSS都不敢说自">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5nocss1.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5nocss2.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5css1.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5css2.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5nodeVersion.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5ip.png">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5add.gif">
<meta property="og:image" content="http://ow7iaz7ej.bkt.clouddn.com/5delete.gif">
<meta property="og:updated_time" content="2017-09-14T07:16:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="最近学习 JavaScript、node.js 的总结">
<meta name="twitter:description" content="大前端全栈的热潮下，最近趁工作不太忙，学习了JavaScript，node.js，做一个小小的Demo来记录一下学习的过程。大佬勿喷。小Demo主要功能是记录用户的个人信息，可以对用户的个人信息进行增删改查。前端页面使用HTML +CSS实现，JavaScript控制逻辑，后台使用node.js实现。下面我分三部分总结一下。 一、前端页面1.1 页面网上传着一句话：不会点HTML+CSS都不敢说自">
<meta name="twitter:image" content="http://ow7iaz7ej.bkt.clouddn.com/5nocss1.png">
  
    <link rel="alternative" href="/atom.xml" title="leerme の Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="http://ow7iaz7ej.bkt.clouddn.com/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://ow7iaz7ej.bkt.clouddn.com/%E9%92%9F.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">leerme</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">leerme</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://ow7iaz7ej.bkt.clouddn.com/%E9%92%9F.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">leerme</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-最近学习总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/12/最近学习总结/" class="article-date">
  	<time datetime="2017-09-12T09:19:23.000Z" itemprop="datePublished">2017-09-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      最近学习 JavaScript、node.js 的总结
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>大前端全栈的热潮下，最近趁工作不太忙，学习了JavaScript，node.js，做一个小小的Demo来记录一下学习的过程。大佬勿喷。小Demo主要功能是记录用户的个人信息，可以对用户的个人信息进行增删改查。前端页面使用HTML +CSS实现，JavaScript控制逻辑，后台使用node.js实现。下面我分三部分总结一下。</p>
<h3 id="一、前端页面"><a href="#一、前端页面" class="headerlink" title="一、前端页面"></a>一、前端页面</h3><h4 id="1-1-页面"><a href="#1-1-页面" class="headerlink" title="1.1 页面"></a>1.1 页面</h4><p>网上传着一句话：不会点HTML+CSS都不敢说自己是程序员，所以写了几个简单的页面，也没有什么技术含量,都是div、span、ul、li、input之类的标签。</p>
<p>下图就是我写的页面！</p>
<p><img src="http://ow7iaz7ej.bkt.clouddn.com/5nocss1.png" alt="首页无CSS"><br><img src="http://ow7iaz7ej.bkt.clouddn.com/5nocss2.png" alt="增加页无CSS"></p>
<h4 id="1-2-CSS"><a href="#1-2-CSS" class="headerlink" title="1.2 CSS"></a>1.2 CSS</h4><p>哈哈是不是太丑了，那肯定不是有三个星期CSS功力的我写的页面，简单的加入点CSS样式之后，这才是我写的。</p>
<p><img src="http://ow7iaz7ej.bkt.clouddn.com/5css1.png" alt="首页CSS"><br><img src="http://ow7iaz7ej.bkt.clouddn.com/5css2.png" alt="增加页CSS"><br>css也就是 margin、padding、width、height等值的配置，当然变成一个高手这些远远不够。</p>
<h3 id="二、前端服务器交互（AJAX）"><a href="#二、前端服务器交互（AJAX）" class="headerlink" title="二、前端服务器交互（AJAX）"></a>二、前端服务器交互（AJAX）</h3><p>只是做前端的相比都知道AJAX，这里说说我只怎么处理各个浏览器兼容，并且很高效<br><strong>问题引出：</strong> 犹豫IE低版本不兼容XMLHttpRequest，所以每次调用AJAX就需要判断是否兼容，然后在调用合适的方法，假如浏览器用AJAX调用100个请求，那就要判断100次兼容。所以非常消耗性能和时间。<br><strong>解决思想：</strong> 第一次执行creatXHR函数的时候，需要兼容判断，在判断完成后，直接把创建AJAX函数赋值(这里举例AJAX函数赋值就是A)给creatXHR函数，那么以后调用creatXHR函数的时候执行的就是AJAX函数赋值（A)，可以省去其中的兼容性判断。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">function creatXHR() &#123;</div><div class="line">        var xhr = null,</div><div class="line">            flag = false,</div><div class="line">            ary = [</div><div class="line">                function () &#123;</div><div class="line">                    return new XMLHttpRequest;</div><div class="line">                &#125;,</div><div class="line">                function () &#123;</div><div class="line">                    return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">                &#125;,</div><div class="line">                function () &#123;</div><div class="line">                    return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);</div><div class="line">                &#125;,</div><div class="line">                function () &#123;</div><div class="line">                    return new ActiveXObject(&quot;Msxml3.XMLHTTP&quot;);</div><div class="line">                &#125;</div><div class="line">            ];</div><div class="line"></div><div class="line">        for (var i = 0, len = ary.length; i &lt; len; i++) &#123;</div><div class="line">            var curFn = ary[i];</div><div class="line">            try &#123;</div><div class="line">                xhr = curFn();</div><div class="line">                creatXHR = curFn;</div><div class="line">                flag = true;</div><div class="line">                break;</div><div class="line">            &#125; catch (e) &#123;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        if (!flag) &#123;</div><div class="line">            throw new Error(&quot;your browser is not support ajax,please change you broser,try again&quot;);</div><div class="line">        &#125;</div><div class="line">        return xhr;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>AJAX向服务器端发送请求的四个步骤；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var xhr = creatXHR();//1、创建对象</div><div class="line">    xhr.open(_default.type, _default.url, _default.async);//2、请求类型，网址，是否异步</div><div class="line">    xhr.onreadystatechange = function () &#123;</div><div class="line">                &#125;;//3、状态变化监听函数</div><div class="line">    xhr.send(_default.data);//4、发送请求</div></pre></td></tr></table></figure></p>
<p>Demo中处理网络请求核心代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">function ajax(option) &#123;</div><div class="line">        var _default = &#123;</div><div class="line">            url: &quot;&quot;,</div><div class="line">            type: &quot;get&quot;,</div><div class="line">            dataType: &quot;json&quot;,</div><div class="line">            async: true,</div><div class="line">            data: null,</div><div class="line">            getHead: null,</div><div class="line">            success: null</div><div class="line">        &#125;;</div><div class="line">        for (var key in option) &#123;</div><div class="line">            if (option.hasOwnProperty(key)) &#123;</div><div class="line">                _default[key] = option[key];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        //解决缓存问题</div><div class="line">        if (_default.type === &quot;get&quot;) &#123;</div><div class="line">            _default.url.indexOf(&quot;?&quot;) &gt;= 0 ? _default.url += &quot;&amp;&quot; : _default.url += &quot;?&quot;;</div><div class="line">            _default.url += &quot;_=&quot; + Math.random();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        var xhr = creatXHR();</div><div class="line">        xhr.open(_default.type, _default.url, _default.async);</div><div class="line">        xhr.onreadystatechange = function () &#123;</div><div class="line">            if (/^2\d&#123;2&#125;$/.test(xhr.status)) &#123;</div><div class="line">                if (xhr.readyState === 2) &#123;</div><div class="line">                    if (typeof _default.getHead === &quot;function&quot;) &#123;</div><div class="line">                        _default.getHead.call(xhr);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                if (xhr.readyState === 4) &#123;</div><div class="line">                    var val = xhr.responseText;</div><div class="line">                    if (_default.dataType === &quot;json&quot;) &#123;</div><div class="line">                        val = &quot;JSON&quot; in window ? JSON.parse(val) : eval(&quot;(&quot; + val + &quot;)&quot;);</div><div class="line">                    &#125;</div><div class="line">                    _default.success &amp;&amp; _default.success.call(xhr, val);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        xhr.send(_default.data);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h3 id="三、后端（node-js）"><a href="#三、后端（node-js）" class="headerlink" title="三、后端（node.js）"></a>三、后端（node.js）</h3><h4 id="3-1-环境配置"><a href="#3-1-环境配置" class="headerlink" title="3.1 环境配置"></a>3.1 环境配置</h4><p>因为我事先安装好了，所以前两步操作无图（尴尬）<br>第一步:打开终端,输入以下命令安装Homebrew<br>ruby -e “$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install" target="_blank" rel="external">https://raw.githubusercontent.com/Homebrew/install/master/install</a>);<br>第二步:安装node,在终端输入以下命令<br>brew install node<br>第三步 查看node安装成功与否<br>node -v<br><img src="http://ow7iaz7ej.bkt.clouddn.com/5nodeVersion.png" alt="查看是否验证安装node"></p>
<h4 id="3-2-node-js的最基本操作"><a href="#3-2-node-js的最基本操作" class="headerlink" title="3.2 node.js的最基本操作"></a>3.2 node.js的最基本操作</h4><p>1.node中提供的三个常用的模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var http = require(&quot;http&quot;),</div><div class="line">    fs = require(&quot;fs&quot;),</div><div class="line">    url = require(&quot;url&quot;);</div></pre></td></tr></table></figure></p>
<p>2.静态资源文件请求的处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var server = http.createServer(function (req, res) &#123;</div><div class="line">	// 静态资源文件请求的处理</div><div class="line">	// 数据接口的处理</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>3.服务创建成功执行回调函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">server.listen(8080, function () &#123;</div><div class="line">    //-&gt;当服务创建成功，并且端口号也监听成功之后执行这个回调函数</div><div class="line">    console.log(&quot;server is create success,listening on 8080 port!&quot;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="3-3-静态资源文件请求的处理"><a href="#3-3-静态资源文件请求的处理" class="headerlink" title="3.3 静态资源文件请求的处理"></a>3.3 静态资源文件请求的处理</h4><p>静态资源文件请求的处理其中重要的点是为了兼容，要对请求文件的MIME Type进行匹配。MIME Type是什么？<br>在浏览器中显示的内容HTML、XML、CSS、PNG、GIF…… 那么，浏览器是如何区分它们，决定什么内容用什么形式来显示？，答案是 MIME Type，也就是该资源的媒体类型。</p>
<p>参考链接：<a href="http://tool.oschina.net/commons" target="_blank" rel="external">http://tool.oschina.net/commons</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">var server = http.createServer(function (req, res) &#123;</div><div class="line">    var urlObj = url.parse(req.url, true),</div><div class="line">        pathname = urlObj.pathname,</div><div class="line">        query = urlObj.query;</div><div class="line">    var reg = /\.(HTML|CSS|JS|ICO)/i;</div><div class="line">    if (reg.test(pathname)) &#123;</div><div class="line">        var suffix = reg.exec(pathname)[1].toUpperCase();</div><div class="line">        var suffixMIME = &quot;text/html&quot;;</div><div class="line">        switch (suffix) &#123;</div><div class="line">            case &quot;CSS&quot;:</div><div class="line">                suffixMIME = &quot;text/css&quot;;</div><div class="line">                break;</div><div class="line">            case &quot;JS&quot;:</div><div class="line">                suffixMIME = &quot;text/javascript&quot;;</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">        try &#123;</div><div class="line">            var conFile = fs.readFileSync(&quot;.&quot; + pathname, &quot;utf-8&quot;);</div><div class="line">            res.writeHead(200, &#123;&apos;content-type&apos;: suffixMIME + &apos;;charset=utf-8;&apos;&#125;);</div><div class="line">            res.end(conFile);</div><div class="line">        &#125; catch (e) &#123;</div><div class="line">            res.writeHead(404, &#123;&apos;content-type&apos;: &apos;text/plain;charset=utf-8;&apos;&#125;);</div><div class="line">            res.end(&quot;file is not found~&quot;);</div><div class="line">        &#125;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">   &#125;);</div></pre></td></tr></table></figure></p>
<h4 id="3-4-API数据接口的处理"><a href="#3-4-API数据接口的处理" class="headerlink" title="3.4 API数据接口的处理"></a>3.4 API数据接口的处理</h4><p>这个是Demo实现了数据的增、删、改、查，所以这里简单的对增，删谈谈。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 获取服务器端存储的数据</div><div class="line">var customId = null,</div><div class="line">    customPath = &quot;./json/custom.json&quot;,</div><div class="line">    result = &#123;code: 1, msg: &quot;&quot;, data: null&#125;,</div><div class="line">    con = fs.readFileSync(customPath, &quot;utf-8&quot;);</div><div class="line">con.length === 0 ? con = &apos;[]&apos; : null;</div><div class="line">con = JSON.parse(con);</div></pre></td></tr></table></figure>
<p>增加一条客户信息的时候要介绍一下node中requestListener的两个监听方法，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 在接收到数据的时候调用</div><div class="line">req.on(&quot;data&quot;, function (chunk) &#123;</div><div class="line">&lt;!--数据传到服务器不是一次接受到，而是一段一段的数据所以要对数据进行整合 其中参数chunk就是一段一段的数据--&gt;</div><div class="line">&#125;);</div><div class="line">// 在接收数据完成后调用</div><div class="line">req.on(&quot;end&quot;, function () &#123;</div><div class="line">&lt;!--数据传递完之后调用，调用之前要先判断数据是否为空--&gt;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>增加一条客户信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"> // 增加一条客户信息相关代码</div><div class="line">if (pathname === &quot;/addInfo&quot;) &#123;</div><div class="line">        //-&gt;获取客户端通过请求主体传递进来的内容</div><div class="line">        var str = &apos;&apos;;</div><div class="line">        req.on(&quot;data&quot;, function (chunk) &#123;</div><div class="line">            str += chunk;</div><div class="line">        &#125;);</div><div class="line">        req.on(&quot;end&quot;, function () &#123;</div><div class="line">            if (str.length === 0) &#123;</div><div class="line">                res.writeHead(200, &#123;&apos;content-type&apos;: &apos;application/json;charset=utf-8;&apos;&#125;);</div><div class="line">                res.end(JSON.stringify(&#123;</div><div class="line">                    code: 1,</div><div class="line">                    msg: &quot;增加失败,没有传递任何需要增加的信息&quot;</div><div class="line">                &#125;));</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line">            var data = JSON.parse(str);</div><div class="line">            //-&gt;在现有的DATA中追加一个ID:获取CON中最后一项的ID,新的ID是在原有基础上加一即可,如果之前一项都没有,我们这一项的ID就是1</div><div class="line">            data[&quot;id&quot;] = con.length === 0 ? 1 : parseFloat(con[con.length - 1][&quot;id&quot;]) + 1;</div><div class="line">            con.push(data);</div><div class="line">            fs.writeFileSync(customPath, JSON.stringify(con), &quot;utf-8&quot;);</div><div class="line">            res.end(JSON.stringify(&#123;</div><div class="line">                code: 0,</div><div class="line">                msg: &quot;增加成功!&quot;</div><div class="line">            &#125;));</div><div class="line">        &#125;);</div><div class="line">        return;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>根据传入的用户ID删除这个用户信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//3)根据传递进来的客户ID删除这个客户</div><div class="line">    if (pathname === &quot;/removeInfo&quot;) &#123;</div><div class="line">        customId = query[&quot;id&quot;];</div><div class="line">        var flag = false;</div><div class="line">        for (i = 0; i &lt; con.length; i++) &#123;</div><div class="line">            if (con[i][&quot;id&quot;] == customId) &#123;</div><div class="line">                con.splice(i, 1);</div><div class="line">                flag = true;</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        result.msg = &quot;删除失败&quot;;</div><div class="line">        if (flag) &#123;</div><div class="line">            fs.writeFileSync(customPath, JSON.stringify(con), &quot;utf-8&quot;);</div><div class="line">            result = &#123;</div><div class="line">                code: 0,</div><div class="line">                msg: &quot;删除成功&quot;</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">        res.writeHead(200, &#123;&apos;content-type&apos;: &apos;application/json;charset=utf-8;&apos;&#125;);</div><div class="line">        res.end(JSON.stringify(result));</div><div class="line">        return;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h3 id="四、Demo演示"><a href="#四、Demo演示" class="headerlink" title="四、Demo演示"></a>四、Demo演示</h3><p>演示由于服务器中配置的端口号是8080，所以网址的时候需要加上端口号，<br>现在打开页面（不是本地的页面），通过IP访问。已经不是静态页面了。</p>
<p><img src="http://ow7iaz7ej.bkt.clouddn.com/5ip.png" alt="Demo演示"></p>
<p>因为自己平时学习，所以服务器弄在自己电脑上，所以这里的IP就是我电脑的IP地址。<br>在终端输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1</div></pre></td></tr></table></figure></p>
<p>增加操作：<br><img src="http://ow7iaz7ej.bkt.clouddn.com/5add.gif" alt="Demo演示"></p>
<p>删除操作：<br><img src="http://ow7iaz7ej.bkt.clouddn.com/5delete.gif" alt="Demo演示"></p>
<p>项目地址 <strong>麻烦各位大佬给个Star</strong>：<a href="https://github.com/leerme/NodeDemo" target="_blank" rel="external">https://github.com/leerme/NodeDemo</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/20/iOS11上的一些问题/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          项目在iOS11上遇到的小问题
        
      </div>
    </a>
  
  
    <a href="/2017/09/07/算法最长无重复子串/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Longest Substring Without Repeating Characters</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="ds-share share" data-thread-key="最近学习总结" data-title="最近学习 JavaScript、node.js 的总结" data-url="http://yoursite.com/2017/09/12/最近学习总结/"  data-images="http://ow7iaz7ej.bkt.clouddn.com/%E9%92%9F.jpg" data-content="最近学习 JavaScript、node.js 的总结">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">
      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
 </div>
 





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2018 leerme
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>